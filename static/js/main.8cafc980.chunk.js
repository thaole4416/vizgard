(this.webpackJsonpvizgardpage=this.webpackJsonpvizgardpage||[]).push([[0],{404:function(e,t,n){},622:function(e,t,n){"use strict";n.r(t);var a,i=n(0),c=n(14),r=n.n(c),o=(n(404),n(405),n(19)),s=n(178),l=n(17),d=n(654),u=n(23),b=n(3);!function(e){e.CREATE_DATASET="@@datasets/CREATE_DATASET",e.UPDATE_DATASET="@@datasets/UPDATE_DATASET",e.ADD_IMAGES="@@datasets/ADD_IMAGES",e.RENAME_DATASET="@@datasets/RENAME_DATASET",e.DELETE_DATASET="@@datasets/DELETE_DATASET"}(a||(a={}));var j={color:{primary:"#12EF8C",secondary:"#F4F6F8",white:"white",black:"black"},breakpoints:{down:{sm:"@media (max-width: 959.95px)",md:"@media (max-width: 1279.95px)"}}},p=n(24),h=n(110),f=n(2),m=Object(d.a)((function(){return{root:function(e){return{display:"flex",justifyContent:e.justifyContent,alignItems:e.alignItems}},interactive:{cursor:"pointer"}}}));function g(e){var t=e.justifyContent,n=e.className,a=e.alignItems,i=e.children,c=Object(h.a)(e,["justifyContent","className","alignItems","children"]),r=m({justifyContent:t,alignItems:a});return Object(f.jsx)("div",Object(p.a)(Object(p.a)({},c),{},{className:Object(b.a)(r.root,n),children:i}))}g.defaultProps={justifyContent:"",alignItems:"",className:""};var O=Object(d.a)((function(){return{root:function(e){var t=e.fontWeight,n=e.fontSize;return{fontWeight:t,color:e.color,fontSize:"".concat(n,"rem")}},interactive:{cursor:"pointer"}}}));function v(e){var t=e.fontWeight,n=e.fontSize,a=e.color,i=e.children,c=e.interactive,r=Object(h.a)(e,["fontWeight","fontSize","color","children","interactive"]),o=O({fontWeight:t,fontSize:n,color:a});return Object(f.jsx)("p",Object(p.a)(Object(p.a)({},r),{},{className:Object(b.a)(o.root,c&&o.interactive),children:i}))}v.defaultProps={interactive:!1,color:"black",fontSize:1,fontWeight:0};var x=Object(d.a)((function(){return{container:{width:"80%"},button:{border:"1px solid #b7b7b7",background:"#EBEBEB",padding:"3px 10px"},label:{width:100},input:{width:250},imagesPreview:{display:"flex",flexWrap:"wrap"},imagePreview:{width:"100%",maxWidth:"20%",padding:".5rem"},fileInput:{display:"none"}}}));function E(){var e=x(),t=Object(o.b)(),n=Object(l.g)(),c=Object(i.useState)(""),r=Object(u.a)(c,2),s=r[0],d=r[1],j=Object(i.useState)([]),p=Object(u.a)(j,2),h=p[0],m=p[1],g=Object(i.useRef)(null),O=function(e){return new Promise((function(t,n){var a=new FileReader;a.onloadend=function(){a&&a.result&&t(a.result)},a.onerror=function(){n(a)},a.readAsDataURL(e)}))};return Object(f.jsxs)("form",{className:e.container,onSubmit:function(e){e.preventDefault();var i,c=h.map((function(e,t){return{name:"Image ".concat(t+1),src:e,regions:[]}}));t((i={name:s,images:c},{type:a.CREATE_DATASET,payload:i})),n.push("/vizgard/datasets")},children:[Object(f.jsxs)("div",{className:"m-3",children:[Object(f.jsx)("label",{htmlFor:"name",className:e.label,children:"Name"}),Object(f.jsx)("input",{id:"name",className:e.input,value:s,onChange:function(e){return d(e.target.value)}})]}),Object(f.jsxs)("div",{className:"m-3",children:[Object(f.jsx)("label",{htmlFor:"logo",className:e.label,children:"Images"}),Object(f.jsx)("input",{id:"logo",type:"file",className:e.fileInput,ref:g,multiple:!0,accept:".jpg, .png, .jpeg",onChange:function(e){var t=[],n=e.target.files;if(n&&n.length)for(var a=0;a<n.length;a++)t.push(O(n[a]));Promise.all(t).then((function(e){return m(e)})),e.preventDefault()}}),Object(f.jsx)("button",{type:"button",className:e.button,onClick:function(){var e;null!==g&&(null===(e=g.current)||void 0===e||e.click())},children:"Choose Images"}),Object(f.jsx)("div",{className:e.imagesPreview,children:h.map((function(t,n){return Object(f.jsx)("img",{alt:"",src:t,className:Object(b.a)(e.imagePreview,"interactive")},"image-".concat(n+1))}))})]}),Object(f.jsx)("button",{type:"submit",className:Object(b.a)(e.button,"m-3"),children:"Create"})]})}var y=n(361),S=n.n(y),C=Object(d.a)((function(){return{container:{width:"20%",borderRight:"1px solid #e7e8e8"},button:{border:"1px solid #b7b7b7",background:"#EBEBEB",padding:"3px 10px",display:"block",width:"96%",margin:"auto",marginTop:"1rem"}}}));function N(){var e=C(),t=Object(l.g)(),n=Object(l.h)().pathname;return Object(f.jsx)("div",{className:e.container,children:n.search(/dataset$|dataset\//g)>0&&Object(f.jsx)("button",{type:"button",className:e.button,onClick:function(){return t.goBack()},children:Object(f.jsxs)(g,{justifyContent:"center",alignItems:"center",children:[Object(f.jsx)(S.a,{fontSize:"small"}),"Back to Datasets"]})})})}var k=Object(d.a)((function(){return{container:{height:"calc(100vh - 5rem - 62px)"},header:{borderBottom:"1px solid #e7e8e8",height:"5rem","& > h1":{margin:".8rem 1rem 1.3rem .5rem"}},button:{border:"none",background:j.color.primary,color:j.color.white,padding:"3px 10px",marginLeft:"auto"},list:{paddingBottom:"1rem",width:"80%",overflowY:"auto"},listItem:{display:"flex",background:j.color.white,margin:"1.5rem",padding:"1rem",borderRadius:10},text:{flex:1},image:{width:"250px"}}}));function w(){var e=k(),t=Object(l.g)(),n=Object(o.b)(),c=Object(i.useState)(!1),r=Object(u.a)(c,2),s=r[0],d=r[1],j=Object(o.c)((function(e){return e.datasets})),p=function(e){var t;n((t=e,{type:a.DELETE_DATASET,payload:t}))};return Object(i.useEffect)((function(){d(!1)}),[j]),Object(f.jsxs)("main",{className:e.container,children:[Object(f.jsxs)("header",{className:Object(b.a)(e.header),children:[Object(f.jsx)("h1",{children:"DataSets"}),Object(f.jsx)("button",{type:"button",className:e.button,onClick:function(){return t.push("/vizgard/dataset/")},children:"Create New"})]}),Object(f.jsxs)(g,{className:e.container,children:[Object(f.jsx)(N,{}),s?Object(f.jsx)(E,{}):Object(f.jsx)("section",{className:e.list,children:j.map((function(n,a){var i;return Object(f.jsxs)("div",{className:e.listItem,children:[Object(f.jsxs)("div",{className:e.text,children:[Object(f.jsx)(v,{onClick:function(){return t.push("/vizgard/dataset/".concat(a))},fontWeight:500,fontSize:1.25,interactive:!0,children:n.name}),Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:"interactive",onClick:function(){return e=a,void t.push("/vizgard/dataset/edit/".concat(e));var e},children:"Rename"})," |"," ",Object(f.jsx)("span",{onClick:function(){return p(a)},style:{color:"red"},className:"interactive",children:"Delete"})]}),Object(f.jsx)(v,{children:n.images.length>1?"".concat(n.images.length," images"):"".concat(n.images.length," image")})]}),Object(f.jsx)("img",{alt:"",src:null!==(i=n.images[0].src)&&void 0!==i?i:"https://picsum.photos/1920/1080",className:e.image})]},"ds-".concat(a+1))}))})]})]})}var A=Object(d.a)((function(){return{container:{backgroundColor:j.color.secondary}}}));function T(){var e=A();return Object(f.jsx)("div",{className:e.container,children:Object(f.jsx)(w,{})})}var D=n(364),I=n(390);function R(e){var t=e.images,n=e.id,i=e.onExit,c=Object(o.b)();return Object(f.jsx)(I.a,{labelImages:!0,regionClsList:[""],images:t,onExit:function(e){var t,r=e.images;c((t={id:n,images:r},{type:a.UPDATE_DATASET,payload:t})),i()}})}var _=Object(d.a)((function(){return{grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, 180px)",gridTemplateRows:"auto",gridGap:"0.5rem"},gridItem:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},canvas:{position:"absolute",width:"100%",height:"100%"},img:{width:"100%",height:"auto"}}})),B=function(e,t,n,a){var i;e.strokeStyle=null!==a&&void 0!==a?a:"red",e.fillStyle=null!==(i="".concat(a,"2a"))&&void 0!==i?i:"red",null===e||void 0===e||e.strokeRect(t.offsetLeft+t.width*n.x,t.offsetTop+t.height*n.y,t.width*n.w,t.height*n.h),null===e||void 0===e||e.fillRect(t.offsetLeft+t.width*n.x,t.offsetTop+t.height*n.y,t.width*n.w,t.height*n.h)},z=function(e,t,n,a){var i;e.strokeStyle=null!==a&&void 0!==a?a:"red",e.fillStyle=null!==(i="".concat(a,"2a"))&&void 0!==i?i:"red",e.moveTo(t.offsetLeft+n[0][0]*t.width,t.offsetTop+n[0][1]*t.height),n.forEach((function(n,a){if(0!==a){var i=Object(u.a)(n,2),c=i[0],r=i[1];e.lineTo(t.offsetLeft+c*t.width,t.offsetTop+r*t.height)}})),e.closePath(),e.stroke(),e.fill()};function V(e){var t=e.images,n=e.handleClick,a=_();return Object(i.useEffect)((function(){t.forEach((function(e,t){var n=document.querySelector("#image-".concat(t+1)),a=null===n||void 0===n?void 0:n.previousElementSibling,i=null===n||void 0===n?void 0:n.parentElement;if(a&&n){var c,r,o=a.getContext("2d");a.width=null!==(c=null===i||void 0===i?void 0:i.offsetWidth)&&void 0!==c?c:0,a.height=null!==(r=null===i||void 0===i?void 0:i.offsetHeight)&&void 0!==r?r:0,null===o||void 0===o||o.beginPath(),e.regions.forEach((function(e){"box"===e.type&&o?B(o,n,e,e.color):"polygon"===e.type&&o&&z(o,n,e.points,e.color)}))}}))}),[t]),Object(f.jsx)("div",{className:a.grid,children:t.map((function(e,t){return Object(f.jsxs)("div",{className:a.gridItem,children:[Object(f.jsx)("canvas",{onClick:n,className:Object(b.a)(a.canvas,"interactive")}),Object(f.jsx)("img",{className:a.img,src:e.src,alt:"",id:"image-".concat(t+1),onLoad:function(){return function(e,t){var n=document.querySelector("#image-".concat(t+1)),a=null===n||void 0===n?void 0:n.previousElementSibling,i=null===n||void 0===n?void 0:n.parentElement;if(a&&n){var c,r,o=a.getContext("2d");a.width=null!==(c=null===i||void 0===i?void 0:i.offsetWidth)&&void 0!==c?c:0,a.height=null!==(r=null===i||void 0===i?void 0:i.offsetHeight)&&void 0!==r?r:0,null===o||void 0===o||o.beginPath(),e.regions.forEach((function(e){"box"===e.type&&o?B(o,n,e,e.color):"polygon"===e.type&&o&&z(o,n,e.points,e.color)}))}}(e,t)}})]},"image ".concat(t+1))}))})}var W=Object(d.a)((function(){return{header:{borderBottom:"1px solid #e7e8e8",height:"5rem","& > h1":{margin:".8rem 1rem 1.3rem .5rem"}},container:{height:"calc(100vh - 5rem - 62px)"},details:{padding:"2rem",width:"80%",overflowY:"auto"},subContainer:{background:"white",padding:"1rem",marginBottom:"2rem"},imagePreview:{width:"100%",maxWidth:"20%",padding:".5rem"},processOption:{width:"49%",background:"white",padding:"1rem"},button:{border:"1px solid #b7b7b7",background:"#EBEBEB",padding:"3px 10px"}}}));function F(){var e,t,n,c,r,s,d,b=W(),j=Object(o.b)(),p=Object(o.c)((function(e){return e.datasets})),h=Object(i.useState)(!1),m=Object(u.a)(h,2),O=m[0],x=m[1],E=Object(i.useRef)(null),y=Object(l.i)().params.id,S=function(e,t){return new Promise((function(n,a){var i=new FileReader;i.onloadend=function(){i&&i.result&&n({name:t,src:i.result,regions:[]})},i.onerror=function(){a(i)},i.readAsDataURL(e)}))};return Object(f.jsxs)("div",{className:b.details,children:[Object(f.jsxs)("div",{className:b.subContainer,children:[Object(f.jsx)(v,{fontWeight:500,fontSize:1.25,interactive:!0,children:null===(e=p[Number(y)])||void 0===e?void 0:e.name}),Object(f.jsx)(v,{children:(null===(t=p[Number(y)])||void 0===t?void 0:t.images.length)>1?"".concat(null===(n=p[Number(y)])||void 0===n?void 0:n.images.length," images"):"".concat(null===(c=p[Number(y)])||void 0===c?void 0:c.images.length," image")})]}),Object(f.jsxs)("div",{className:b.subContainer,children:[Object(f.jsxs)(g,{justifyContent:"space-between",alignItems:"center",children:[Object(f.jsx)(v,{fontWeight:500,fontSize:1.25,interactive:!0,children:"Images"}),Object(f.jsx)("input",{id:"logo",type:"file",style:{display:"none"},ref:E,multiple:!0,accept:".jpg, .png, .jpeg",onChange:function(e){var t=[],n=e.target.files;if(n&&n.length)for(var i=0;i<n.length;i++)t.push(S(n[i],n[i].name));Promise.all(t).then((function(e){return j((t={id:Number(y),images:e},{type:a.ADD_IMAGES,payload:t}));var t})),e.preventDefault()}}),Object(f.jsx)("button",{className:b.button,onClick:function(){var e;null!==E&&(null===(e=E.current)||void 0===e||e.click())},type:"button",children:"Add More Images"})]}),Object(f.jsx)("div",{children:Object(f.jsx)(V,{handleClick:function(){return x(!0)},images:null!==(r=null===(s=p[Number(y)])||void 0===s?void 0:s.images)&&void 0!==r?r:[]})})]}),Object(f.jsxs)(g,{justifyContent:"space-between",children:[Object(f.jsxs)("div",{className:b.processOption,children:[Object(f.jsx)(v,{fontWeight:500,fontSize:1.25,interactive:!0,children:"Preprocessing Options"}),Object(f.jsx)(v,{children:"Applied to all images"}),Object(f.jsx)("hr",{}),Object(f.jsx)(v,{fontWeight:500,fontSize:1.25,interactive:!0,children:"Auto-Orient"}),Object(f.jsx)(v,{fontWeight:500,color:"red",children:"Remove"}),Object(f.jsx)("hr",{}),Object(f.jsx)(v,{fontWeight:500,fontSize:1.25,interactive:!0,children:"Resize"}),Object(f.jsx)(v,{fontWeight:500,color:"red",children:"Remove"}),Object(f.jsx)("hr",{}),Object(f.jsx)(v,{fontWeight:500,fontSize:1.25,interactive:!0,children:"Grayscale"}),Object(f.jsx)(v,{fontWeight:500,color:"red",children:"Remove"})]}),Object(f.jsxs)("div",{className:b.processOption,children:[Object(f.jsx)(v,{fontWeight:500,fontSize:1.25,interactive:!0,children:"Augmentation Options"}),Object(f.jsx)(v,{children:"Applied to all images"}),Object(f.jsx)("hr",{}),Object(f.jsx)(v,{fontWeight:500,fontSize:1.25,interactive:!0,children:"Flip"}),Object(f.jsx)(v,{fontWeight:500,color:"red",children:"Remove"})]})]}),Object(f.jsx)(D.a,{contentStyle:{width:"80%",height:"80%"},open:O,closeOnDocumentClick:!0,onClose:function(){return x(!1)},children:Object(f.jsx)(R,{images:null===(d=p[Number(y)])||void 0===d?void 0:d.images,id:Number(y),onExit:function(){return x(!1)}})})]})}var L=Object(d.a)((function(){return{container:{width:"20%",borderRight:"1px solid #e7e8e8"},header:{borderBottom:"1px solid #e7e8e8",height:"5rem","& > h1":{margin:".8rem 1rem 1.3rem .5rem"}},button:{border:"none",background:j.color.primary,color:j.color.white,padding:"3px 10px",marginLeft:"auto"}}}));function P(){var e,t,n=L(),a=Object(o.c)((function(e){return e.datasets})),i=Object(l.h)().pathname,c=i.split("/").pop();return Object(f.jsxs)("header",{className:n.header,children:[Object(f.jsx)("h1",{children:null!==(e=null===(t=a[Number(c)])||void 0===t?void 0:t.name)&&void 0!==e?e:"Datasets"}),c&&!i.includes("edit")&&Object(f.jsx)("button",{type:"button",className:n.button,children:"Generate"})]})}var U=Object(d.a)((function(){return{container:{width:"80%"},button:{border:"1px solid #b7b7b7",background:"#EBEBEB",padding:"3px 10px"},label:{width:100},input:{width:250},imagesPreview:{display:"flex",flexWrap:"wrap"},imagePreview:{width:"100%",maxWidth:"20%",padding:".5rem"},fileInput:{display:"none"}}}));function M(){var e=U(),t=Object(o.b)(),n=Object(l.g)(),c=Object(i.useState)(""),r=Object(u.a)(c,2),s=r[0],d=r[1],j=Object(l.h)().pathname.split("/").pop();return Object(f.jsxs)("form",{className:e.container,onSubmit:function(e){var i;e.preventDefault(),t((i={index:Number(j),name:s},{type:a.RENAME_DATASET,payload:i})),n.push("/vizgard/datasets")},children:[Object(f.jsxs)("div",{className:"m-3",children:[Object(f.jsx)("label",{htmlFor:"name",className:e.label,children:"Name"}),Object(f.jsx)("input",{id:"name",className:e.input,value:s,onChange:function(e){return d(e.target.value)}})]}),Object(f.jsx)("button",{type:"submit",className:Object(b.a)(e.button,"m-3"),children:"Edit"})]})}var G=Object(d.a)((function(){return{container:{backgroundColor:j.color.secondary},main:{height:"calc(100vh - 5rem - 62px)"},list:{paddingBottom:"1rem",width:"80%"},listItem:{display:"flex",background:j.color.white,margin:"1.5rem",padding:"1rem",borderRadius:10},text:{flex:1},image:{width:"250px"}}}));function H(){var e=G(),t=Object(l.i)();return Object(f.jsx)("div",{className:e.container,children:Object(f.jsxs)("main",{children:[Object(f.jsx)(P,{}),Object(f.jsxs)(g,{className:e.main,children:[Object(f.jsx)(N,{}),Object(f.jsxs)(l.d,{children:[Object(f.jsx)(l.b,{path:"".concat(t.url,"/edit/:id"),component:M}),Object(f.jsx)(l.b,{path:"".concat(t.url,"/:id"),component:F}),Object(f.jsx)(l.b,{exact:!0,path:"".concat(t.url),component:E})]})]})]})})}var J=n(81),K=n.p+"static/media/blacklogo.2f844d87.jpg";function Y(e,t){1===e.readyState&&e.send(t)}var X,q=Object(d.a)((function(){return{features:{borderRight:"1px solid #e7e8e8",display:"flex",flexDirection:"column",width:"20%",paddingTop:"1rem",overflowY:"auto","& > span":{margin:"6px",padding:"6px",border:"solid 1px #b7b7b7",cursor:"pointer"},"& input":{marginLeft:"auto"}},feature:{background:"#EBEBEB",display:"flex",alignItems:"center"},version:{padding:"20px",marginTop:"auto"}}}));function Z(){var e=q(),t=Object(o.c)((function(e){return e.serverInfo})),n=Object(o.c)((function(e){return e.features})),a=Object(o.c)((function(e){return e.socket})),i=function(e){return function(){a&&Y(a,"toggle-".concat(e.replace(/[A-Z]/g,(function(e){return"-".concat(e.toLowerCase())}))))}};return Object(f.jsxs)("div",{id:"features-section",className:e.features,children:[Object(f.jsxs)("span",{id:"cmd-toggle-detection",className:e.feature,onClick:i("detection"),children:[Object(f.jsx)("span",{children:"Object Detection"}),Object(f.jsx)("input",{type:"checkbox",value:n.detection,checked:Boolean(n.detection),onChange:i("detection")})]}),Object(f.jsx)("span",{className:e.feature,children:"Toggle Model"}),Object.keys(n.classes).map((function(t){return Object(f.jsxs)("span",{id:"cmd-toggle-single-tracking",className:Object(b.a)(e.feature,"ml-4"),onClick:(c=t,function(){a&&Y(a,"toggle-model-class ".concat(c))}),children:[Object(f.jsx)("span",{children:(i=t,i.substr(0,1).toUpperCase()+i.substr(1))}),Object(f.jsx)("input",{type:"checkbox",value:n.classes[t],checked:Boolean(n.classes[t])})]},t);var i,c})),Object(f.jsxs)("span",{id:"cmd-toggle-single-tracking",className:e.feature,onClick:i("singleTracking"),children:[Object(f.jsx)("span",{children:"Single Object Tracking"}),Object(f.jsx)("input",{type:"checkbox",value:n.singleTracking,checked:Boolean(n.singleTracking),onChange:i("singleTracking")})]}),Object(f.jsxs)("span",{id:"cmd-toggle-face-redaction",className:e.feature,onClick:i("faceRedaction"),children:[Object(f.jsx)("span",{children:"Face Redaction"}),Object(f.jsx)("input",{type:"checkbox",onChange:i("faceRedaction"),value:n.faceRedaction,checked:Boolean(n.faceRedaction)})]}),Object(f.jsxs)("span",{id:"cmd-toggle-face-redaction",className:e.feature,onClick:i("aruco"),children:[Object(f.jsx)("span",{children:"ArUco Marker"}),Object(f.jsx)("input",{type:"checkbox",onChange:i("aruco"),value:n.aruco,checked:Boolean(n.aruco)})]}),Object(f.jsxs)("span",{id:"cmd-toggle-stabilization",className:e.feature,onClick:i("stabilization"),children:[Object(f.jsx)("span",{children:"Video Stabilization"}),Object(f.jsx)("input",{type:"checkbox",value:n.stabilization,checked:Boolean(n.stabilization),onChange:i("stabilization")})]}),Object(f.jsxs)("span",{className:e.feature,onClick:i("graphicsDisplay"),children:[Object(f.jsx)("span",{children:"On Screen Display"}),Object(f.jsx)("input",{checked:Boolean(n.graphicsDisplay),onChange:i("graphicsDisplay"),type:"checkbox",value:n.graphicsDisplay})]}),Object(f.jsxs)("span",{className:e.feature,onClick:i("cameraCalibration"),children:[Object(f.jsx)("span",{children:"Calibrate Mode"}),Object(f.jsx)("input",{type:"checkbox",value:n.cameraCalibration,checked:Boolean(n.cameraCalibration),onChange:i("cameraCalibration")})]}),Object(f.jsx)("div",{id:"server-version",className:e.version,children:t.version?"Server ".concat(t.version):null})]})}!function(e){e.CONNECT_SERVER="@@serverInfo/CONNECT_SERVER",e.SAVE_SERVER_INFO="@@serverInfo/SAVE_SERVER_INFO",e.SAVE_VIDEO_INFO="@@serverInfo/SAVE_VIDEO_INFO",e.SHUTDOWN_SERVER="@@serverInfo/SHUTDOWN_SERVER",e.CHANGE_SERVER_IN="@@serverInfo/CHANGE_SERVER_IN",e.CHANGE_SERVER_OUT="@@serverInfo/CHANGE_SERVER_OUT"}(X||(X={}));var $;!function(e){e.SAVE_SOCKET="@@socket/SAVE_SOCKET",e.CLOSE_SOCKET="@@socket/CLOSE_SOCKET"}($||($={}));var Q=function(){return{type:$.CLOSE_SOCKET}},ee=Object(d.a)((function(){return{header:{borderBottom:"1px solid #e7e8e8",height:"5rem"},serverInfo:{marginLeft:"auto",display:"flex",alignItems:"center","& input":{width:"125px",outline:"none",margin:"1rem 1rem 1rem .5rem"},"& label":{marginBottom:0}},button:{border:"1px solid #b7b7b7",background:"#EBEBEB",padding:"3px 10px","&.active":{background:"#12ef8c",color:"white",padding:"3px 10px",border:"1px solid #b7b7b7"}}}}));function te(){var e=ee(),t=Object(i.useState)("192.168.99.188"),n=Object(u.a)(t,2),a=n[0],c=n[1],r=Object(i.useState)(8673),s=Object(u.a)(r,2),l=s[0],d=s[1],j=Object(o.c)((function(e){return e.serverInfo})),p=Object(o.c)((function(e){return e.socket})),h=Object(o.b)();return Object(f.jsxs)("header",{className:Object(b.a)(e.header),children:[Object(f.jsx)("h1",{children:"Client"}),Object(f.jsxs)("div",{id:"server-info",className:e.serverInfo,children:[Object(f.jsx)("label",{htmlFor:"server-address",children:"Server Network Address"}),Object(f.jsx)("input",{id:"server-address",type:"text",value:a,onChange:function(e){c(e.target.value)}}),Object(f.jsx)("label",{htmlFor:"server-port",children:"Port"}),Object(f.jsx)("input",{id:"server-port",type:"number",role:"textbox",value:l,onChange:function(e){d(Number(e.target.value))}}),Object(f.jsx)("button",{type:"button",id:"btn-connect",className:Object(b.a)(e.button,j.version&&"active"),onClick:function(){p?(p.close(),h(Q()),h({type:X.SHUTDOWN_SERVER})):h(function(e){var t=e.address,n=e.port;return{type:X.CONNECT_SERVER,payload:{address:t,port:n}}}({address:a,port:l}))},children:j.version?"Connected":"Connect"})]})]})}var ne,ae=Object(d.a)((function(){return{button:{border:"1px solid #b7b7b7",background:"#EBEBEB",padding:"3px 10px"},mainSection:{display:"flex"},mainInfo:{fontWeight:"bold",fontSize:"1.1em",marginLeft:".5rem"},video:{width:"50%",flex:1,padding:"1rem",overflowY:"auto"},videoInput:{display:"flex",alignItems:"center","& label":{width:"20%",marginBottom:0},"& input":{flex:1},"& span":{width:"10%",textAlign:"center"}},preview:{position:"relative","& img, canvas, video":{width:"100%"},"& canvas":{position:"absolute",top:0,left:0,height:"100%"}},json:Object(J.a)({width:"30%",overflowY:"auto",paddingTop:"1rem"},j.breakpoints.down.md,{display:"none"})}}));function ie(){var e=ae(),t=Object(i.useRef)(null),n=Object(i.useState)(""),a=Object(u.a)(n,2),c=a[0],r=a[1],s=Object(i.useState)(""),l=Object(u.a)(s,2),d=l[0],j=l[1],p=Object(i.useState)(""),h=Object(u.a)(p,2),m=h[0],g=h[1],O=Object(i.useState)(""),v=Object(u.a)(O,2),x=v[0],E=v[1],y=Object(o.c)((function(e){return e.socket})),S=Object(o.c)((function(e){return e.serverInfo})),C=Object(o.c)((function(e){return e.features})),N=Object(o.c)((function(e){return e.objects}));return Object(i.useEffect)((function(){var e,n,a,i;C.graphicsDisplay&&ne&&(ne.clearRect(0,0,null!==(e=null===(n=t.current)||void 0===n?void 0:n.width)&&void 0!==e?e:0,null!==(a=null===(i=t.current)||void 0===i?void 0:i.height)&&void 0!==a?a:0),N.forEach((function(e){var t=e.singleTracking,n=e.x,a=e.y,i=e.w,c=e.h;!function(e){var t=e.context,n=e.singleTracking,a=e.x,i=e.y,c=e.w,r=e.h;t.beginPath(),t.strokeStyle=n?"#ffa500":"#50ff00",t.lineWidth=2,t.rect(a,i,c,r),t.stroke()}({context:ne,singleTracking:t,x:n,y:a,w:i,h:c})})))}),[C,N]),Object(i.useEffect)((function(){S.serverIn===c&&S.serverOut===d||(r(S.serverIn),j(S.serverOut))}),[S]),Object(i.useEffect)((function(){t&&t.current&&(ne=t.current.getContext("2d"))}),[]),Object(f.jsxs)("main",{children:[Object(f.jsx)(te,{}),Object(f.jsx)("div",{id:"main-info",className:e.mainInfo,children:S.width?"".concat(S.width," x ").concat(S.height," | WebRTC | FPS Capture: ").concat(S.fpsCap," | FPS DEtection: ").concat(S.fpsDet," | Delay: ").concat(S.delay,"ms"):null}),Object(f.jsxs)("div",{id:"main-section",className:e.mainSection,style:{height:"calc(100vh - 5rem - 62px - ".concat(S.width?"26px":"0px",")")},children:[Object(f.jsx)(Z,{}),Object(f.jsxs)("div",{className:e.video,children:[Object(f.jsxs)("div",{id:"video-preview",className:e.preview,children:[Object(f.jsx)("img",{src:K,alt:"",style:{display:x?"none":"block"}}),Object(f.jsx)("video",{src:x,autoPlay:!0,style:{display:x?"block":"none"},"data-vscid":"bdogi47m3"}),Object(f.jsx)("canvas",{style:{display:x?"none":"block"},id:"canvas-bounding-box",onMouseUp:function(e){if(y&&t.current){var n,a=null===(n=t.current)||void 0===n?void 0:n.getBoundingClientRect(),i=parseInt(((e.clientX-a.left)*t.current.width/a.width).toString()),c=parseInt(((e.clientY-a.top)*t.current.height/a.height).toString());Y(y,"single-track ".concat(i," ").concat(c))}},ref:t,width:S.width||1920,height:S.height||1080})]}),Object(f.jsxs)("div",{className:Object(b.a)(e.videoInput,"my-2"),children:[Object(f.jsx)("label",{htmlFor:"server-video-in",children:"Server Video In"}),Object(f.jsx)("input",{id:"server-video-in",type:"text",value:c,onChange:function(e){return r(e.target.value)}}),Object(f.jsx)("button",{type:"button",className:Object(b.a)(e.button,"m-2"),onClick:function(){y&&Y(y,"update-server-video-in ".concat(c))},children:"Update"})]}),Object(f.jsxs)("div",{className:Object(b.a)(e.videoInput,"my-2"),children:[Object(f.jsx)("label",{htmlFor:"server-video-out",children:"Server Video Out"}),Object(f.jsx)("input",{id:"server-video-out",type:"text",value:d,onChange:function(e){return j(e.target.value)}}),Object(f.jsx)("button",{type:"button",className:Object(b.a)(e.button,"m-2"),onClick:function(){y&&Y(y,"update-server-video-out ".concat(d))},children:"Update"})]}),Object(f.jsxs)("div",{className:Object(b.a)(e.videoInput,"my-2"),children:[Object(f.jsx)("label",{htmlFor:"client-video-in",children:"Client Video In"}),Object(f.jsx)("input",{id:"client-video-in",type:"text",value:m,onChange:function(e){return g(e.target.value)}}),Object(f.jsx)("button",{type:"button",className:Object(b.a)(e.button,"m-2"),onClick:function(){E(m)},children:"Update"})]}),Object(f.jsx)("button",{type:"button",className:e.button,onClick:function(){y&&Y(y,"shutdown")},children:"Shutdown Server"})]}),Object(f.jsx)("div",{id:"json-section",className:e.json,children:Object(f.jsx)("pre",{children:N.length?JSON.stringify(N,null,2):null})})]})]})}var ce=Object(d.a)((function(){return{container:{backgroundColor:j.color.secondary}}}));function re(){var e=ce();return Object(f.jsx)("div",{className:e.container,children:Object(f.jsx)(ie,{})})}var oe=n.p+"static/media/logo.6f28cb85.jpg",se=Object(d.a)((function(){return{header:{background:j.color.white},navItem:{marginLeft:"60px",fontSize:"1.1em",padding:"2px 8px",color:j.color.black,"&.active":{borderBottom:"5px solid ".concat(j.color.primary)},"&:hover":{textDecoration:"none",color:j.color.black}}}})),le=[{id:0,name:"Client",link:"/"},{id:1,name:"Datasets",link:"/datasets"}];function de(){var e=se(),t=Object(i.useState)(0),n=Object(u.a)(t,2),a=n[0],c=n[1];return Object(i.useEffect)((function(){window.location.pathname.includes("dataset")&&c(1)}),[]),Object(f.jsxs)("header",{className:e.header,children:[Object(f.jsx)("img",{src:oe,height:50}),le.map((function(t){return Object(f.jsx)(s.b,{className:Object(b.a)(e.navItem,a===t.id&&"active"),to:t.link,onClick:function(){return c(t.id)},children:t.name},t.id)}))]})}var ue=Object(d.a)((function(){return{footer:{position:"fixed",bottom:"20px",right:"20px",textAlign:"right",marginLeft:"auto",marginRight:"20px",height:"24px",background:j.color.secondary,padding:"16px",lineHeight:0}}}));function be(){var e=ue();return Object(f.jsx)("footer",{className:e.footer,children:"Client V0.1.0"})}function je(){return Object(f.jsxs)(s.a,{children:[Object(f.jsx)(de,{}),Object(f.jsxs)(l.d,{children:[Object(f.jsx)(l.b,{path:"/vizgard/datasets",component:T}),Object(f.jsx)(l.b,{path:"/vizgard/dataset",component:H}),Object(f.jsx)(l.b,{path:"/vizgard/",component:re}),Object(f.jsx)(l.a,{to:"/vizgard/"})]}),Object(f.jsx)(be,{})]})}var pe,he=n(91);!function(e){e.SAVE_FEATURES="@@features/SAVE_FEATURES",e.CHANGE_FEATURE="@@features/CHANGE_FEATURE",e.CHANGE_MODEL="@@features/CHANGE_MODEL"}(pe||(pe={}));var fe,me={cameraCalibration:0,faceRedaction:0,graphicsDisplay:0,singleTracking:0,detection:0,stabilization:0,aruco:0,classes:{}},ge=n(59);!function(e){e.SAVE_OBJECTS="@@objects/SAVE_OBJECTS"}(fe||(fe={}));var Oe,ve=[],xe={address:"127.0.0.1",port:8673,version:"",serverIn:"",serverOut:"",delay:0,fpsCap:0,fpsDet:0,height:0,width:0,isConnect:!1};!function(e){e.SEND_MESSAGE="@@notification/SEND_MESSAGE",e.HIDE_MESSAGE="@@notification/HIDE_MESSAGE"}(Oe||(Oe={}));var Ee={message:"",variant:""},ye=[],Se=Object(he.c)({datasets:function(e,t){switch(t.type){case a.CREATE_DATASET:return[].concat(Object(ge.a)(e),[t.payload]);case a.UPDATE_DATASET:var n=Object(ge.a)(e),i=t.payload,c=i.id,r=i.images;return n[c].images=r,n;case a.ADD_IMAGES:var o=Object(ge.a)(e),s=t.payload,l=s.id,d=s.images;return o[l].images=[].concat(Object(ge.a)(o[l].images),Object(ge.a)(d)),o;case a.RENAME_DATASET:var u=t.payload,b=u.index,j=u.name;return e.map((function(e,t){return t===b?Object(p.a)(Object(p.a)({},e),{},{name:j}):e}));case a.DELETE_DATASET:return Object(ge.a)(e.filter((function(e,n){return n!==t.payload})));default:return ye}},features:function(e,t){switch(t.type){case pe.SAVE_FEATURES:return Object(p.a)(Object(p.a)({},e),t.payload);default:return e||me}},notification:function(e,t){switch(t.type){case Oe.SEND_MESSAGE:return Object(p.a)({},t.payload);case Oe.HIDE_MESSAGE:return Ee;default:return e||Ee}},objects:function(e,t){switch(t.type){case fe.SAVE_OBJECTS:return Object(ge.a)(t.payload);default:return e||ve}},serverInfo:function(e,t){switch(t.type){case X.CONNECT_SERVER:var n=t.payload,a=n.address,i=n.port;return Object(p.a)(Object(p.a)({},e),{},{isConnect:!0,address:a,port:i});case X.SAVE_VIDEO_INFO:var c=t.payload,r=c.width,o=c.height,s=c.fpsCap,l=c.fpsDet,d=c.delay;return Object(p.a)(Object(p.a)({},e),{},{isConnect:!0,width:r,height:o,fpsCap:s,fpsDet:l,delay:d});case X.SAVE_SERVER_INFO:var u=t.payload,b=u.version,j=u.serverIn,h=u.serverOut;return Object(p.a)(Object(p.a)({},e),{},{isConnect:!0,version:b,serverIn:j,serverOut:h});case X.SHUTDOWN_SERVER:return xe;default:return e||xe}},socket:function(e,t){switch(t.type){case X.CONNECT_SERVER:var n=t.payload,a=n.address,i=n.port;return new WebSocket("ws://".concat(a,":").concat(i));case $.CLOSE_SOCKET:return null;default:return e||null}}}),Ce=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||he.d,Ne=Object(he.e)(Se,Ce(Object(he.a)()));function ke(){var e=Object(o.c)((function(e){return e.serverInfo})).isConnect,t=Object(o.c)((function(e){return e.socket})),n=Object(o.b)();return Object(i.useEffect)((function(){e&&t&&(t.onmessage=function(e){var t,a=JSON.parse(e.data);a.objects?(n(function(e){var t=e.width,n=e.height,a=e.fpsCap,i=e.fpsDet,c=e.delay;return{type:X.SAVE_VIDEO_INFO,payload:{width:t,height:n,fpsCap:a,fpsDet:i,delay:c}}}({width:a.width,height:a.height,fpsCap:a.fpsCap,fpsDet:a.fpsDet,delay:a.delay})),n((t=a.objects,{type:fe.SAVE_OBJECTS,payload:t}))):(n(function(e){var t=e.version,n=e.serverIn,a=e.serverOut;return{type:X.SAVE_SERVER_INFO,payload:{version:t,serverIn:n,serverOut:a}}}({serverIn:a.serverIn,serverOut:a.serverOut,version:a.version})),n(function(e){return{type:pe.SAVE_FEATURES,payload:e}}({detection:a.detection,singleTracking:a.singleTracking,faceRedaction:a.faceRedaction,stabilization:a.stabilization,graphicsDisplay:a.graphicsDisplay,cameraCalibration:a.cameraCalibration,aruco:a.aruco,classes:a.classes})))},t.onclose=function(){n(Q())},t.onerror=function(){var e;n((e={variant:"error",message:"Unable to connect to the server!"},{type:Oe.SEND_MESSAGE,payload:e})),n(Q())})}),[e,t]),null}var we=Object(d.a)((function(){return{container:{display:"flex",padding:"6px 16px",fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:400,lineHeight:1.43,borderRadius:"4px",letterSpacing:"0.01071em",backgroundColor:"transparent",wordBreak:"break-word",margin:"16px auto"},error:{color:"rgb(97, 26, 21)",backgroundColor:"rgb(253, 236, 234)"},info:{color:"rgb(13, 60, 97)",backgroundColor:"rgb(232, 244, 253)"},success:{color:"rgb(30, 70, 32)",backgroundColor:"rgb(237, 247, 237)"},message:{color:"inherit",background:"inherit"}}}));function Ae(e){var t=e.variant,n=e.children,a=we();return Object(f.jsx)("div",{className:Object(b.a)(a.container,"error"===t&&a.error,"info"===t&&a.info,"success"===t&&a.success),children:n})}var Te=Object(d.a)((function(){return{container:{left:"50%",right:"auto",bottom:"24px",transform:"translateX(-50%)",display:"flex",zIndex:1400,position:"fixed",alignItems:"center",justifyContent:"center"},snackbar:{display:"flex",padding:"6px 16px",fontSize:"1.2rem",fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:400,lineHeight:1.43,borderRadius:"4px",letterSpacing:"0.01071em",backgroundColor:"transparent",boxShadow:"0px 3px 5px -1px rgb(0 0 0 / 20%), 0px 6px 10px 0px rgb(0 0 0 / 14%), 0px 1px 18px 0px rgb(0 0 0 / 12%)",opacity:0,transform:"scale(0.75, 0.5625)",transition:"opacity 195ms cubic-bezier (0.4, 0, 0.2, 1) 0ms, \n                  transform 130ms cubic-bezier (0.4, 0, 0.2, 1) 65ms","&.active":{opacity:1,transform:0,transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"}},error:{color:"#fff",fontWeight:500,backgroundColor:"rgb(244 67 54)"},warning:{color:"#fff",fontWeight:500,backgroundColor:"rgb(255 152 0)"},info:{color:"#fff",fontWeight:500,backgroundColor:"rgb(33 150 243)"},success:{color:"#fff",fontWeight:500,backgroundColor:"rgb(76 175 80)"}}}));function De(){var e=Te(),t=Object(o.c)((function(e){return e.notification})),n=t.variant,a=t.message,c=Object(o.b)();return Object(i.useEffect)((function(){a&&setTimeout((function(){c({type:Oe.HIDE_MESSAGE})}),2e3)}),[c,a]),Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("div",{className:Object(b.a)(e.container),children:Object(f.jsx)("div",{className:Object(b.a)(e.snackbar,a&&"active","error"===n&&e.error,"info"===n&&e.info,"success"===n&&e.success),children:Object(f.jsx)(Ae,{variant:"message",children:a})})})})}var Ie=function(){return Object(f.jsxs)(o.a,{store:Ne,children:[Object(f.jsx)(je,{}),Object(f.jsx)(De,{}),Object(f.jsx)(ke,{})]})};r.a.render(Object(f.jsx)(i.StrictMode,{children:Object(f.jsx)(Ie,{})}),document.getElementById("root"))}},[[622,1,2]]]);
//# sourceMappingURL=main.8cafc980.chunk.js.map