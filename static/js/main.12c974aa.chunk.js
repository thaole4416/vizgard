(this["webpackJsonpname-of-app"]=this["webpackJsonpname-of-app"]||[]).push([[0],{404:function(e,t,n){},622:function(e,t,n){"use strict";n.r(t);var i,c=n(0),a=n(14),r=n.n(a),o=(n(404),n(405),n(19)),s=n(178),l=n(17),d=n(654),u=n(20),b=n(3);!function(e){e.CREATE_DATASET="@@datasets/CREATE_DATASET",e.UPDATE_DATASET="@@datasets/UPDATE_DATASET",e.ADD_IMAGES="@@datasets/ADD_IMAGES",e.RENAME_DATASET="@@datasets/RENAME_DATASET",e.DELETE_DATASET="@@datasets/DELETE_DATASET"}(i||(i={}));var j={color:{primary:"#12EF8C",secondary:"#F4F6F8",white:"white",black:"black"},breakpoints:{down:{sm:"@media (max-width: 959.95px)",md:"@media (max-width: 1279.95px)"}}},h=n(24),p=n(110),f=n(2),m=Object(d.a)((function(){return{root:function(e){return{display:"flex",justifyContent:e.justifyContent,alignItems:e.alignItems}},interactive:{cursor:"pointer"}}}));function g(e){var t=e.justifyContent,n=e.className,i=e.alignItems,c=e.children,a=Object(p.a)(e,["justifyContent","className","alignItems","children"]),r=m({justifyContent:t,alignItems:i});return Object(f.jsx)("div",Object(h.a)(Object(h.a)({},a),{},{className:Object(b.a)(r.root,n),children:c}))}g.defaultProps={justifyContent:"",alignItems:"",className:""};var O=Object(d.a)((function(){return{root:function(e){var t=e.fontWeight,n=e.fontSize;return{fontWeight:t,color:e.color,fontSize:"".concat(n,"rem")}},interactive:{cursor:"pointer"}}}));function v(e){var t=e.fontWeight,n=e.fontSize,i=e.color,c=e.children,a=e.interactive,r=Object(p.a)(e,["fontWeight","fontSize","color","children","interactive"]),o=O({fontWeight:t,fontSize:n,color:i});return Object(f.jsx)("p",Object(h.a)(Object(h.a)({},r),{},{className:Object(b.a)(o.root,a&&o.interactive),children:c}))}v.defaultProps={interactive:!1,color:"black",fontSize:1,fontWeight:0};var x=Object(d.a)((function(){return{container:{width:"20%",borderRight:"1px solid #e7e8e8"},header:{borderBottom:"1px solid #e7e8e8",height:"5rem","& > h1":{margin:".8rem 1rem 1.3rem .5rem"}},button:{border:"none",background:j.color.primary,color:j.color.white,padding:"3px 10px",marginLeft:"auto"}}}));function E(e){var t,n=e.title,i=x(),c=Object(o.c)((function(e){return e.datasets})),a=Object(l.h)().pathname,r=a.split("/").pop();return Object(f.jsxs)("header",{className:i.header,children:[r?Object(f.jsx)("h1",{children:null===(t=c[Number(r)])||void 0===t?void 0:t.name}):Object(f.jsx)("h1",{children:null!==n&&void 0!==n?n:"Datasets"}),r&&!a.includes("edit")&&Object(f.jsx)("button",{type:"button",className:i.button,children:"Generate"})]})}E.defaultProps={title:""};var y=Object(d.a)((function(){return{container:{display:"flex",padding:"6px 16px",fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:600,fontSize:"0.8rem",lineHeight:1.43,borderRadius:"4px",letterSpacing:"0.01071em",backgroundColor:"transparent",wordBreak:"break-word",margin:"8px auto"},error:{color:"rgb(97, 26, 21)",backgroundColor:"rgb(253, 236, 234)"},info:{color:"rgb(13, 60, 97)",backgroundColor:"rgb(232, 244, 253)"},success:{color:"rgb(30, 70, 32)",backgroundColor:"rgb(237, 247, 237)"},message:{color:"inherit",background:"inherit"}}}));function S(e){var t=e.variant,n=e.children,i=y();return Object(f.jsx)("div",{className:Object(b.a)(i.container,"error"===t&&i.error,"info"===t&&i.info,"success"===t&&i.success),children:n})}var N=Object(d.a)((function(){return{container:{width:"80%"},button:{border:"1px solid #b7b7b7",background:"#EBEBEB",padding:"3px 10px"},label:{width:100},input:{width:250},wrapper:{},inner:{},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, 84px)",gridAutoRows:"84px",gridGap:"0.5rem"},gridItem:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},imagePreview:{width:"100%",height:"100%",objectFit:"cover"},fileInput:{display:"none"}}}));function C(){var e=N(),t=Object(o.b)(),n=Object(l.g)(),a=Object(c.useState)(""),r=Object(u.a)(a,2),s=r[0],d=r[1],j=Object(c.useState)([]),h=Object(u.a)(j,2),p=h[0],m=h[1],g=Object(c.useState)(!1),O=Object(u.a)(g,2),v=O[0],x=O[1],y=Object(c.useRef)(null),C=function(e){return new Promise((function(t,n){var i=new FileReader;i.onloadend=function(){i&&i.result&&t(i.result)},i.onerror=function(){n(i)},i.readAsDataURL(e)}))};return Object(f.jsxs)("div",{className:e.container,children:[Object(f.jsx)(E,{title:"New Dataset"}),Object(f.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),s&&p.length>0){var c=p.map((function(e,t){return{name:"Image ".concat(t+1),src:e,regions:[]}}));t((a={name:s,images:c},{type:i.CREATE_DATASET,payload:a})),n.push("/datasets")}else x(!0);var a},children:[Object(f.jsxs)("div",{className:"m-3",children:[Object(f.jsx)("label",{htmlFor:"name",className:e.label,children:"Name"}),Object(f.jsx)("input",{id:"name",className:e.input,value:s,onChange:function(e){return d(e.target.value)}}),v&&!s&&Object(f.jsx)("div",{className:"w-25",children:Object(f.jsx)(S,{variant:"error",children:"Name is required"})})]}),Object(f.jsxs)("div",{className:"m-3",children:[Object(f.jsx)("label",{htmlFor:"logo",className:e.label,children:"Images"}),Object(f.jsx)("input",{id:"logo",type:"file",className:e.fileInput,ref:y,multiple:!0,accept:".jpg, .png, .jpeg",onChange:function(e){var t=[],n=e.target.files;if(n&&n.length)for(var i=0;i<n.length;i++)t.push(C(n[i]));Promise.all(t).then((function(e){return m(e)})),e.preventDefault()}}),Object(f.jsx)("button",{type:"button",className:e.button,onClick:function(){var e;null!==y&&(null===(e=y.current)||void 0===e||e.click())},children:"Choose Images"}),Object(f.jsx)("div",{className:Object(b.a)(e.grid,"mt-3"),children:p.map((function(t,n){return Object(f.jsx)("div",{className:e.gridItem,children:Object(f.jsx)("img",{alt:"",src:t,className:Object(b.a)(e.imagePreview)},"image-".concat(n+1))},"image ".concat(n+1))}))}),v&&p.length<=0?Object(f.jsx)("div",{className:"w-25",children:Object(f.jsx)(S,{variant:"error",children:"Images are required"})}):null]}),Object(f.jsx)("button",{type:"submit",className:Object(b.a)(e.button,"m-3"),children:"Create"})]})]})}var k=n(361),w=n.n(k),A=Object(d.a)((function(){return{container:{width:"20%",borderRight:"1px solid #e7e8e8"},button:{border:"1px solid #b7b7b7",background:"#EBEBEB",padding:"3px 10px",display:"block",width:"96%",margin:"auto",marginTop:"1rem"},h1:{padding:".8rem 1rem 1.3rem 2rem",marginBottom:"0",height:"80px"},subMenu:{padding:".4rem",paddingLeft:"2rem",background:"#EBEBEB"}}}));function T(){var e=A(),t=Object(l.g)(),n=Object(l.h)().pathname;return Object(f.jsx)("div",{className:e.container,children:n.search(/dataset$|dataset\//g)>0?Object(f.jsx)("button",{type:"button",className:e.button,onClick:function(){return t.goBack()},children:Object(f.jsxs)(g,{justifyContent:"center",alignItems:"center",children:[Object(f.jsx)(w.a,{fontSize:"small"}),"Back to Datasets"]})}):Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{className:e.h1,children:"Projects"}),Object(f.jsx)("div",{className:e.subMenu,children:"All projects"})]})})}var I=Object(d.a)((function(){return{container:{height:"calc(100vh - 62px)"},header:{borderBottom:"1px solid #e7e8e8",height:"5rem","& > h1":{margin:".8rem 1rem 1.3rem .5rem"}},button:{border:"none",background:j.color.primary,color:j.color.white,padding:"3px 10px",marginLeft:"auto"},list:{paddingBottom:"1rem",width:"80%",overflowY:"auto"},listItem:{display:"flex",background:j.color.white,margin:"1.5rem",padding:"1rem",borderRadius:10},text:{flex:1},image:{width:"250px",height:"140px",objectFit:"cover"}}}));function D(){var e=I(),t=Object(l.g)(),n=Object(o.b)(),a=Object(c.useState)(!1),r=Object(u.a)(a,2),s=r[0],d=r[1],j=Object(o.c)((function(e){return e.datasets})),h=function(e){var t;n((t=e,{type:i.DELETE_DATASET,payload:t}))};return Object(c.useEffect)((function(){d(!1)}),[j]),Object(f.jsx)("main",{className:e.container,children:Object(f.jsxs)(g,{className:e.container,children:[Object(f.jsx)(T,{}),s?Object(f.jsx)(C,{}):Object(f.jsxs)("section",{className:e.list,children:[Object(f.jsxs)("header",{className:Object(b.a)(e.header),children:[Object(f.jsx)("h1",{children:"All projects"}),Object(f.jsx)("button",{type:"button",className:e.button,onClick:function(){return t.push("/dataset/")},children:"Create New"})]}),j.map((function(n,i){var c,a;return Object(f.jsxs)("div",{className:e.listItem,onClick:function(){t.push("/dataset/".concat(i))},children:[Object(f.jsxs)("div",{className:e.text,children:[Object(f.jsx)(v,{fontWeight:500,fontSize:1.25,interactive:!0,children:n.name}),Object(f.jsxs)("p",{children:[Object(f.jsx)("span",{className:"interactive",onClick:function(e){var n;e.stopPropagation(),n=i,t.push("/dataset/edit/".concat(n))},children:"Rename"})," |"," ",Object(f.jsx)("span",{onClick:function(e){e.stopPropagation(),h(i)},style:{color:"red"},className:"interactive",children:"Delete"})]}),Object(f.jsx)(v,{children:n.images.length>1?"".concat(n.images.length," images"):"".concat(n.images.length," image")})]}),Object(f.jsx)("img",{alt:"",src:null!==(c=null===(a=n.images[0])||void 0===a?void 0:a.src)&&void 0!==c?c:"https://picsum.photos/1920/1080",className:e.image})]},"ds-".concat(i+1))}))]})]})})}var R=Object(d.a)((function(){return{container:{backgroundColor:j.color.secondary}}}));function _(){var e=R();return Object(f.jsx)("div",{className:e.container,children:Object(f.jsx)(D,{})})}var B=n(364),V=n(390);function F(e){var t=e.images,n=e.id,c=e.onExit,a=Object(o.b)();return Object(f.jsx)(V.a,{labelImages:!0,regionClsList:[""],images:t,onExit:function(e){var t,r=e.images;a((t={id:n,images:r},{type:i.UPDATE_DATASET,payload:t})),c()}})}var z=Object(d.a)((function(){return{grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, 84px)",gridAutoRows:"84px",gridGap:"0.5rem"},gridItem:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},canvas:{position:"absolute",width:"100%",height:"100%"},img:{width:"100%",height:"100%",objectFit:"cover"}}})),W=function(e,t,n,i){var c;e.strokeStyle=null!==i&&void 0!==i?i:"red",e.fillStyle=null!==(c="".concat(i,"2a"))&&void 0!==c?c:"red",null===e||void 0===e||e.strokeRect(t.offsetLeft+t.width*n.x,t.offsetTop+t.height*n.y,t.width*n.w,t.height*n.h),null===e||void 0===e||e.fillRect(t.offsetLeft+t.width*n.x,t.offsetTop+t.height*n.y,t.width*n.w,t.height*n.h)},P=function(e,t,n,i){var c;e.strokeStyle=null!==i&&void 0!==i?i:"red",e.fillStyle=null!==(c="".concat(i,"2a"))&&void 0!==c?c:"red",e.moveTo(t.offsetLeft+n[0][0]*t.width,t.offsetTop+n[0][1]*t.height),n.forEach((function(n,i){if(0!==i){var c=Object(u.a)(n,2),a=c[0],r=c[1];e.lineTo(t.offsetLeft+a*t.width,t.offsetTop+r*t.height)}})),e.closePath(),e.stroke(),e.fill()};function L(e){var t=e.images,n=e.handleClick,i=z(),a=Object(c.useState)(!1),r=Object(u.a)(a,2),o=r[0],s=r[1],l=function(e,t){return!!o||t<30};return Object(c.useEffect)((function(){t.filter(l).forEach((function(e,t){var n=document.querySelector("#image-".concat(t+1)),i=null===n||void 0===n?void 0:n.previousElementSibling,c=null===n||void 0===n?void 0:n.parentElement;if(i&&n){var a,r,o=i.getContext("2d");i.width=null!==(a=null===c||void 0===c?void 0:c.offsetWidth)&&void 0!==a?a:0,i.height=null!==(r=null===c||void 0===c?void 0:c.offsetHeight)&&void 0!==r?r:0,null===o||void 0===o||o.beginPath(),e.regions.forEach((function(e){"box"===e.type&&o?W(o,n,e,e.color):"polygon"===e.type&&o&&P(o,n,e.points,e.color)}))}}))}),[t,o]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:i.grid,children:t.filter(l).map((function(e,t){var c,a,r,o;return Object(f.jsxs)("div",{className:i.gridItem,children:[Object(f.jsx)("canvas",{onClick:n,className:Object(b.a)(i.canvas,"interactive")}),Object(f.jsx)("img",{className:i.img,src:e.src,alt:"",width:null!==(c=null===e||void 0===e||null===(a=e.pixelSize)||void 0===a?void 0:a.w)&&void 0!==c?c:"",height:null!==(r=null===e||void 0===e||null===(o=e.pixelSize)||void 0===o?void 0:o.h)&&void 0!==r?r:"",id:"image-".concat(t+1),onLoad:function(){return function(e,t){var n=document.querySelector("#image-".concat(t+1)),i=null===n||void 0===n?void 0:n.previousElementSibling,c=null===n||void 0===n?void 0:n.parentElement;if(i&&n){var a,r,o=i.getContext("2d");i.width=null!==(a=null===c||void 0===c?void 0:c.offsetWidth)&&void 0!==a?a:0,i.height=null!==(r=null===c||void 0===c?void 0:c.offsetHeight)&&void 0!==r?r:0,null===o||void 0===o||o.beginPath(),e.regions.forEach((function(e){"box"===e.type&&o?W(o,n,e,e.color):"polygon"===e.type&&o&&P(o,n,e.points,e.color)}))}}(e,t)}})]},"image ".concat(t+1))}))}),t.length>30?Object(f.jsx)("div",{className:"mt-3 interactive",style:{color:"#0064bd"},onClick:function(){return s((function(e){return!e}))},children:o?"Show less":"View all images (".concat(t.length,")")}):null]})}var M=Object(d.a)((function(){return{header:{borderBottom:"1px solid #e7e8e8",height:"5rem","& > h1":{margin:".8rem 1rem 1.3rem .5rem"}},container:{height:"calc(100vh - 62px)"},details:{padding:"2rem",width:"80%",overflowY:"auto"},subContainer:{background:"white",padding:"1rem",marginBottom:"2rem"},imagePreview:{width:"100%",maxWidth:"20%",padding:".5rem"},processOption:{width:"49%",background:"white",padding:"1rem"},button:{border:"1px solid #b7b7b7",background:"#EBEBEB",padding:"3px 10px"}}}));function U(){var e,t,n,a,r,s,d,b=M(),j=Object(o.b)(),h=Object(o.c)((function(e){return e.datasets})),p=Object(c.useState)(!1),m=Object(u.a)(p,2),O=m[0],x=m[1],E=Object(c.useRef)(null),y=Object(l.i)().params.id,S=function(e,t){return new Promise((function(n,i){var c=new FileReader;c.onloadend=function(){c&&c.result&&n({name:t,src:c.result,regions:[]})},c.onerror=function(){i(c)},c.readAsDataURL(e)}))};return Object(f.jsxs)("div",{className:b.details,children:[Object(f.jsxs)("div",{className:b.subContainer,children:[Object(f.jsx)(v,{fontWeight:500,fontSize:1.25,interactive:!0,children:null===(e=h[Number(y)])||void 0===e?void 0:e.name}),Object(f.jsx)(v,{children:(null===(t=h[Number(y)])||void 0===t?void 0:t.images.length)>1?"".concat(null===(n=h[Number(y)])||void 0===n?void 0:n.images.length," images"):"".concat(null===(a=h[Number(y)])||void 0===a?void 0:a.images.length," image")})]}),Object(f.jsxs)("div",{className:b.subContainer,children:[Object(f.jsxs)(g,{justifyContent:"space-between",alignItems:"center",children:[Object(f.jsx)(v,{fontWeight:500,fontSize:1.25,interactive:!0,children:"Images"}),Object(f.jsx)("input",{id:"logo",type:"file",style:{display:"none"},ref:E,multiple:!0,accept:".jpg, .png, .jpeg",onChange:function(e){var t=[],n=e.target.files;if(n&&n.length)for(var c=0;c<n.length;c++)t.push(S(n[c],n[c].name));Promise.all(t).then((function(e){return j((t={id:Number(y),images:e},{type:i.ADD_IMAGES,payload:t}));var t})),e.preventDefault()}}),Object(f.jsx)("button",{className:b.button,onClick:function(){var e;null!==E&&(null===(e=E.current)||void 0===e||e.click())},type:"button",children:"Add More Images"})]}),Object(f.jsx)("div",{children:Object(f.jsx)(L,{handleClick:function(){return x(!0)},images:null!==(r=null===(s=h[Number(y)])||void 0===s?void 0:s.images)&&void 0!==r?r:[]})})]}),Object(f.jsxs)(g,{justifyContent:"space-between",children:[Object(f.jsxs)("div",{className:b.processOption,children:[Object(f.jsx)(v,{fontWeight:500,fontSize:1.25,interactive:!0,children:"Preprocessing Options"}),Object(f.jsx)(v,{children:"Applied to all images"}),Object(f.jsx)("hr",{}),Object(f.jsx)(v,{fontWeight:500,fontSize:1.25,interactive:!0,children:"Auto-Orient"}),Object(f.jsx)(v,{fontWeight:500,color:"red",children:"Remove"}),Object(f.jsx)("hr",{}),Object(f.jsx)(v,{fontWeight:500,fontSize:1.25,interactive:!0,children:"Resize"}),Object(f.jsx)(v,{fontWeight:500,color:"red",children:"Remove"}),Object(f.jsx)("hr",{}),Object(f.jsx)(v,{fontWeight:500,fontSize:1.25,interactive:!0,children:"Grayscale"}),Object(f.jsx)(v,{fontWeight:500,color:"red",children:"Remove"})]}),Object(f.jsxs)("div",{className:b.processOption,children:[Object(f.jsx)(v,{fontWeight:500,fontSize:1.25,interactive:!0,children:"Augmentation Options"}),Object(f.jsx)(v,{children:"Applied to all images"}),Object(f.jsx)("hr",{}),Object(f.jsx)(v,{fontWeight:500,fontSize:1.25,interactive:!0,children:"Flip"}),Object(f.jsx)(v,{fontWeight:500,color:"red",children:"Remove"})]})]}),Object(f.jsx)(B.a,{contentStyle:{width:"80%",height:"80%"},open:O,closeOnDocumentClick:!0,onClose:function(){return x(!1)},children:Object(f.jsx)(F,{images:null===(d=h[Number(y)])||void 0===d?void 0:d.images,id:Number(y),onExit:function(){return x(!1)}})})]})}var G=Object(d.a)((function(){return{container:{width:"80%"},button:{border:"1px solid #b7b7b7",background:"#EBEBEB",padding:"3px 10px"},label:{width:100},input:{width:250},imagesPreview:{display:"flex",flexWrap:"wrap"},imagePreview:{width:"100%",maxWidth:"20%",padding:".5rem"},fileInput:{display:"none"}}}));function H(){var e=G(),t=Object(o.b)(),n=Object(l.g)(),a=Object(c.useState)(!1),r=Object(u.a)(a,2),s=r[0],d=r[1],j=Object(c.useState)(""),h=Object(u.a)(j,2),p=h[0],m=h[1],g=Object(l.h)().pathname.split("/").pop();return Object(f.jsxs)("div",{className:e.container,children:[Object(f.jsx)(E,{}),Object(f.jsxs)("form",{onSubmit:function(e){var c;e.preventDefault(),p?(t((c={index:Number(g),name:p},{type:i.RENAME_DATASET,payload:c})),n.push("/datasets")):d(!0)},children:[Object(f.jsxs)("div",{className:"m-3",children:[Object(f.jsx)("label",{htmlFor:"name",className:e.label,children:"Name"}),Object(f.jsx)("input",{id:"name",className:e.input,value:p,onChange:function(e){return m(e.target.value)}})]}),s&&!p&&Object(f.jsx)("div",{className:"ml-3 w-25",children:Object(f.jsx)(S,{variant:"error",children:"Name is required"})}),Object(f.jsx)("button",{type:"submit",className:Object(b.a)(e.button,"m-3"),children:"Edit"})]})]})}var J=Object(d.a)((function(){return{container:{backgroundColor:j.color.secondary},main:{height:"calc(100vh - 62px)"},list:{paddingBottom:"1rem",width:"80%"},listItem:{display:"flex",background:j.color.white,margin:"1.5rem",padding:"1rem",borderRadius:10},text:{flex:1},image:{width:"250px"}}}));function K(){var e=J(),t=Object(l.i)();return Object(f.jsx)("div",{className:e.container,children:Object(f.jsx)("main",{children:Object(f.jsxs)(g,{className:e.main,children:[Object(f.jsx)(T,{}),Object(f.jsxs)(l.d,{children:[Object(f.jsx)(l.b,{path:"".concat(t.url,"/edit/:id"),component:H}),Object(f.jsx)(l.b,{path:"".concat(t.url,"/:id"),component:U}),Object(f.jsx)(l.b,{exact:!0,path:"".concat(t.url),component:C})]})]})})})}var Y=n(81),q=n.p+"static/media/blacklogo.2f844d87.jpg";function X(e,t){1===e.readyState&&e.send(t)}var Z,$=Object(d.a)((function(){return{features:{borderRight:"1px solid #e7e8e8",display:"flex",flexDirection:"column",width:"20%",paddingTop:"1rem",overflowY:"auto","& > span":{margin:"6px",padding:"6px",border:"solid 1px #b7b7b7",cursor:"pointer"},"& input":{marginLeft:"auto"}},feature:{background:"#EBEBEB",display:"flex",alignItems:"center"},version:{padding:"20px",marginTop:"auto"}}}));function Q(){var e=$(),t=Object(o.c)((function(e){return e.serverInfo})),n=Object(o.c)((function(e){return e.features})),i=Object(o.c)((function(e){return e.socket})),c=function(e){return function(){i&&X(i,"toggle-".concat(e.replace(/[A-Z]/g,(function(e){return"-".concat(e.toLowerCase())}))))}};return Object(f.jsxs)("div",{id:"features-section",className:e.features,children:[Object(f.jsxs)("span",{id:"cmd-toggle-detection",className:e.feature,onClick:c("detection"),children:[Object(f.jsx)("span",{children:"Object Detection"}),Object(f.jsx)("input",{type:"checkbox",value:n.detection,checked:Boolean(n.detection),onChange:c("detection")})]}),Object(f.jsx)("span",{className:e.feature,children:"Toggle Model"}),Object.keys(n.classes).map((function(t){return Object(f.jsxs)("span",{id:"cmd-toggle-single-tracking",className:Object(b.a)(e.feature,"ml-4"),onClick:(a=t,function(){i&&X(i,"toggle-model-class ".concat(a))}),children:[Object(f.jsx)("span",{children:(c=t,c.substr(0,1).toUpperCase()+c.substr(1))}),Object(f.jsx)("input",{type:"checkbox",value:n.classes[t],checked:Boolean(n.classes[t])})]},t);var c,a})),Object(f.jsxs)("span",{id:"cmd-toggle-single-tracking",className:e.feature,onClick:c("singleTracking"),children:[Object(f.jsx)("span",{children:"Single Object Tracking"}),Object(f.jsx)("input",{type:"checkbox",value:n.singleTracking,checked:Boolean(n.singleTracking),onChange:c("singleTracking")})]}),Object(f.jsxs)("span",{id:"cmd-toggle-face-redaction",className:e.feature,onClick:c("faceRedaction"),children:[Object(f.jsx)("span",{children:"Face Redaction"}),Object(f.jsx)("input",{type:"checkbox",onChange:c("faceRedaction"),value:n.faceRedaction,checked:Boolean(n.faceRedaction)})]}),Object(f.jsxs)("span",{id:"cmd-toggle-face-redaction",className:e.feature,onClick:c("aruco"),children:[Object(f.jsx)("span",{children:"ArUco Marker"}),Object(f.jsx)("input",{type:"checkbox",onChange:c("aruco"),value:n.aruco,checked:Boolean(n.aruco)})]}),Object(f.jsxs)("span",{id:"cmd-toggle-stabilization",className:e.feature,onClick:c("stabilization"),children:[Object(f.jsx)("span",{children:"Video Stabilization"}),Object(f.jsx)("input",{type:"checkbox",value:n.stabilization,checked:Boolean(n.stabilization),onChange:c("stabilization")})]}),Object(f.jsxs)("span",{className:e.feature,onClick:c("graphicsDisplay"),children:[Object(f.jsx)("span",{children:"On Screen Display"}),Object(f.jsx)("input",{checked:Boolean(n.graphicsDisplay),onChange:c("graphicsDisplay"),type:"checkbox",value:n.graphicsDisplay})]}),Object(f.jsxs)("span",{className:e.feature,onClick:c("cameraCalibration"),children:[Object(f.jsx)("span",{children:"Calibrate Mode"}),Object(f.jsx)("input",{type:"checkbox",value:n.cameraCalibration,checked:Boolean(n.cameraCalibration),onChange:c("cameraCalibration")})]}),Object(f.jsx)("div",{id:"server-version",className:e.version,children:t.version?"Server ".concat(t.version):null})]})}!function(e){e.CONNECT_SERVER="@@serverInfo/CONNECT_SERVER",e.SAVE_SERVER_INFO="@@serverInfo/SAVE_SERVER_INFO",e.SAVE_VIDEO_INFO="@@serverInfo/SAVE_VIDEO_INFO",e.SHUTDOWN_SERVER="@@serverInfo/SHUTDOWN_SERVER",e.CHANGE_SERVER_IN="@@serverInfo/CHANGE_SERVER_IN",e.CHANGE_SERVER_OUT="@@serverInfo/CHANGE_SERVER_OUT"}(Z||(Z={}));var ee;!function(e){e.SAVE_SOCKET="@@socket/SAVE_SOCKET",e.CLOSE_SOCKET="@@socket/CLOSE_SOCKET"}(ee||(ee={}));var te=function(){return{type:ee.CLOSE_SOCKET}},ne=Object(d.a)((function(){return{header:{borderBottom:"1px solid #e7e8e8",height:"5rem"},serverInfo:{marginLeft:"auto",display:"flex",alignItems:"center","& input":{width:"125px",outline:"none",margin:"1rem 1rem 1rem .5rem"},"& label":{marginBottom:0}},button:{border:"1px solid #b7b7b7",background:"#EBEBEB",padding:"3px 10px","&.active":{background:"#12ef8c",color:"white",padding:"3px 10px",border:"1px solid #b7b7b7"}}}}));function ie(){var e=ne(),t=Object(c.useState)("192.168.99.188"),n=Object(u.a)(t,2),i=n[0],a=n[1],r=Object(c.useState)(8673),s=Object(u.a)(r,2),l=s[0],d=s[1],j=Object(o.c)((function(e){return e.serverInfo})),h=Object(o.c)((function(e){return e.socket})),p=Object(o.b)();return Object(f.jsxs)("header",{className:Object(b.a)(e.header),children:[Object(f.jsx)("h1",{children:"Client"}),Object(f.jsxs)("div",{id:"server-info",className:e.serverInfo,children:[Object(f.jsx)("label",{htmlFor:"server-address",children:"Server Network Address"}),Object(f.jsx)("input",{id:"server-address",type:"text",value:i,onChange:function(e){a(e.target.value)}}),Object(f.jsx)("label",{htmlFor:"server-port",children:"Port"}),Object(f.jsx)("input",{id:"server-port",type:"number",role:"textbox",value:l,onChange:function(e){d(Number(e.target.value))}}),Object(f.jsx)("button",{type:"button",id:"btn-connect",className:Object(b.a)(e.button,j.version&&"active"),onClick:function(){h?(h.close(),p(te()),p({type:Z.SHUTDOWN_SERVER})):p(function(e){var t=e.address,n=e.port;return{type:Z.CONNECT_SERVER,payload:{address:t,port:n}}}({address:i,port:l}))},children:j.version?"Connected":"Connect"})]})]})}var ce,ae=Object(d.a)((function(){return{button:{border:"1px solid #b7b7b7",background:"#EBEBEB",padding:"3px 10px"},mainSection:{display:"flex"},mainInfo:{fontWeight:"bold",fontSize:"1.1em",marginLeft:".5rem"},video:{width:"50%",flex:1,padding:"1rem",overflowY:"auto"},videoInput:{display:"flex",alignItems:"center","& label":{width:"20%",marginBottom:0},"& input":{flex:1},"& span":{width:"10%",textAlign:"center"}},preview:{position:"relative","& img, canvas, video":{width:"100%"},"& canvas":{position:"absolute",top:0,left:0,height:"100%"}},json:Object(Y.a)({width:"30%",overflowY:"auto",paddingTop:"1rem"},j.breakpoints.down.md,{display:"none"})}}));function re(){var e=ae(),t=Object(c.useRef)(null),n=Object(c.useState)(""),i=Object(u.a)(n,2),a=i[0],r=i[1],s=Object(c.useState)(""),l=Object(u.a)(s,2),d=l[0],j=l[1],h=Object(c.useState)(""),p=Object(u.a)(h,2),m=p[0],g=p[1],O=Object(c.useState)(""),v=Object(u.a)(O,2),x=v[0],E=v[1],y=Object(o.c)((function(e){return e.socket})),S=Object(o.c)((function(e){return e.serverInfo})),N=Object(o.c)((function(e){return e.features})),C=Object(o.c)((function(e){return e.objects}));return Object(c.useEffect)((function(){var e,n,i,c;N.graphicsDisplay&&ce&&(ce.clearRect(0,0,null!==(e=null===(n=t.current)||void 0===n?void 0:n.width)&&void 0!==e?e:0,null!==(i=null===(c=t.current)||void 0===c?void 0:c.height)&&void 0!==i?i:0),C.forEach((function(e){var t=e.singleTracking,n=e.x,i=e.y,c=e.w,a=e.h;!function(e){var t=e.context,n=e.singleTracking,i=e.x,c=e.y,a=e.w,r=e.h;t.beginPath(),t.strokeStyle=n?"#ffa500":"#50ff00",t.lineWidth=2,t.rect(i,c,a,r),t.stroke()}({context:ce,singleTracking:t,x:n,y:i,w:c,h:a})})))}),[N,C]),Object(c.useEffect)((function(){S.serverIn===a&&S.serverOut===d||(r(S.serverIn),j(S.serverOut))}),[S]),Object(c.useEffect)((function(){t&&t.current&&(ce=t.current.getContext("2d"))}),[]),Object(f.jsxs)("main",{children:[Object(f.jsx)(ie,{}),Object(f.jsx)("div",{id:"main-info",className:e.mainInfo,children:S.width?"".concat(S.width," x ").concat(S.height," | MP4 | FPS Capture: ").concat(S.fpsCap," | FPS DEtection: ").concat(S.fpsDet," | Delay: ").concat(S.delay,"ms"):null}),Object(f.jsxs)("div",{id:"main-section",className:e.mainSection,style:{height:"calc(100vh - 5rem - 62px - ".concat(S.width?"26px":"0px",")")},children:[Object(f.jsx)(Q,{}),Object(f.jsxs)("div",{className:e.video,children:[Object(f.jsxs)("div",{id:"video-preview",className:e.preview,children:[Object(f.jsx)("img",{src:q,alt:"",style:{display:x?"none":"block"}}),Object(f.jsx)("video",{src:x,autoPlay:!0,style:{display:x?"block":"none"},"data-vscid":"bdogi47m3"}),Object(f.jsx)("canvas",{style:{display:x?"none":"block"},id:"canvas-bounding-box",onMouseUp:function(e){if(y&&t.current){var n,i=null===(n=t.current)||void 0===n?void 0:n.getBoundingClientRect(),c=parseInt(((e.clientX-i.left)*t.current.width/i.width).toString()),a=parseInt(((e.clientY-i.top)*t.current.height/i.height).toString());X(y,"single-track ".concat(c," ").concat(a))}},ref:t,width:S.width||1920,height:S.height||1080})]}),Object(f.jsxs)("div",{className:Object(b.a)(e.videoInput,"my-2"),children:[Object(f.jsx)("label",{htmlFor:"server-video-in",children:"Server Video In"}),Object(f.jsx)("input",{id:"server-video-in",type:"text",value:a,onChange:function(e){return r(e.target.value)}}),Object(f.jsx)("button",{type:"button",className:Object(b.a)(e.button,"m-2"),onClick:function(){y&&X(y,"update-server-video-in ".concat(a))},children:"Update"})]}),Object(f.jsxs)("div",{className:Object(b.a)(e.videoInput,"my-2"),children:[Object(f.jsx)("label",{htmlFor:"server-video-out",children:"Server Video Out"}),Object(f.jsx)("input",{id:"server-video-out",type:"text",value:d,onChange:function(e){return j(e.target.value)}}),Object(f.jsx)("button",{type:"button",className:Object(b.a)(e.button,"m-2"),onClick:function(){y&&X(y,"update-server-video-out ".concat(d))},children:"Update"})]}),Object(f.jsxs)("div",{className:Object(b.a)(e.videoInput,"my-2"),children:[Object(f.jsx)("label",{htmlFor:"client-video-in",children:"Client Video In"}),Object(f.jsx)("input",{id:"client-video-in",type:"text",value:m,onChange:function(e){return g(e.target.value)}}),Object(f.jsx)("button",{type:"button",className:Object(b.a)(e.button,"m-2"),onClick:function(){E(m)},children:"Update"})]}),Object(f.jsx)("button",{type:"button",className:e.button,onClick:function(){y&&X(y,"shutdown")},children:"Shutdown Server"})]}),Object(f.jsx)("div",{id:"json-section",className:e.json,children:Object(f.jsx)("pre",{children:C.length?JSON.stringify(C,null,2):null})})]})]})}var oe=Object(d.a)((function(){return{container:{backgroundColor:j.color.secondary}}}));function se(){var e=oe();return Object(f.jsx)("div",{className:e.container,children:Object(f.jsx)(re,{})})}var le=n.p+"static/media/logo.6f28cb85.jpg",de=Object(d.a)((function(){return{header:{background:j.color.white},navItem:{marginLeft:"60px",fontSize:"1.1em",padding:"2px 8px",color:j.color.black,"&.active":{borderBottom:"5px solid ".concat(j.color.primary)},"&:hover":{textDecoration:"none",color:j.color.black}}}})),ue=[{id:0,name:"Client",link:"/"},{id:1,name:"Datasets",link:"/datasets"}];function be(){var e=de(),t=Object(c.useState)(0),n=Object(u.a)(t,2),i=n[0],a=n[1];return Object(c.useEffect)((function(){window.location.pathname.includes("dataset")&&a(1)}),[]),Object(f.jsxs)("header",{className:e.header,children:[Object(f.jsx)("img",{src:le,height:50}),ue.map((function(t){return Object(f.jsx)(s.b,{className:Object(b.a)(e.navItem,i===t.id&&"active"),to:t.link,onClick:function(){return a(t.id)},children:t.name},t.id)}))]})}var je=Object(d.a)((function(){return{footer:{position:"fixed",bottom:"20px",right:"20px",textAlign:"right",marginLeft:"auto",marginRight:"20px",height:"24px",background:j.color.secondary,padding:"16px",lineHeight:0}}}));function he(){var e=je();return Object(f.jsx)("footer",{className:e.footer,children:"Client V0.1.0"})}function pe(){return Object(f.jsxs)(s.a,{children:[Object(f.jsx)(be,{}),Object(f.jsxs)(l.d,{children:[Object(f.jsx)(l.b,{path:"/datasets",component:_}),Object(f.jsx)(l.b,{path:"/dataset",component:K}),Object(f.jsx)(l.b,{path:"/",component:se}),Object(f.jsx)(l.a,{to:"/"})]}),Object(f.jsx)(he,{})]})}var fe,me=n(91);!function(e){e.SAVE_FEATURES="@@features/SAVE_FEATURES",e.CHANGE_FEATURE="@@features/CHANGE_FEATURE",e.CHANGE_MODEL="@@features/CHANGE_MODEL"}(fe||(fe={}));var ge,Oe={cameraCalibration:0,faceRedaction:0,graphicsDisplay:0,singleTracking:0,detection:0,stabilization:0,aruco:0,classes:{}},ve=n(59);!function(e){e.SAVE_OBJECTS="@@objects/SAVE_OBJECTS"}(ge||(ge={}));var xe,Ee=[],ye={address:"127.0.0.1",port:8673,version:"",serverIn:"",serverOut:"",delay:0,fpsCap:0,fpsDet:0,height:0,width:0,isConnect:!1};!function(e){e.SEND_MESSAGE="@@notification/SEND_MESSAGE",e.HIDE_MESSAGE="@@notification/HIDE_MESSAGE"}(xe||(xe={}));var Se={message:"",variant:""},Ne=[],Ce=Object(me.c)({datasets:function(e,t){switch(t.type){case i.CREATE_DATASET:return[].concat(Object(ve.a)(e),[t.payload]);case i.UPDATE_DATASET:var n=Object(ve.a)(e),c=t.payload,a=c.id,r=c.images;return n[a].images=r,n;case i.ADD_IMAGES:var o=Object(ve.a)(e),s=t.payload,l=s.id,d=s.images;return o[l].images=[].concat(Object(ve.a)(o[l].images),Object(ve.a)(d)),o;case i.RENAME_DATASET:var u=t.payload,b=u.index,j=u.name;return e.map((function(e,t){return t===b?Object(h.a)(Object(h.a)({},e),{},{name:j}):e}));case i.DELETE_DATASET:return Object(ve.a)(e.filter((function(e,n){return n!==t.payload})));default:return Ne}},features:function(e,t){switch(t.type){case fe.SAVE_FEATURES:return Object(h.a)(Object(h.a)({},e),t.payload);default:return e||Oe}},notification:function(e,t){switch(t.type){case xe.SEND_MESSAGE:return Object(h.a)({},t.payload);case xe.HIDE_MESSAGE:return Se;default:return e||Se}},objects:function(e,t){switch(t.type){case ge.SAVE_OBJECTS:return Object(ve.a)(t.payload);default:return e||Ee}},serverInfo:function(e,t){switch(t.type){case Z.CONNECT_SERVER:var n=t.payload,i=n.address,c=n.port;return Object(h.a)(Object(h.a)({},e),{},{isConnect:!0,address:i,port:c});case Z.SAVE_VIDEO_INFO:var a=t.payload,r=a.width,o=a.height,s=a.fpsCap,l=a.fpsDet,d=a.delay;return Object(h.a)(Object(h.a)({},e),{},{isConnect:!0,width:r,height:o,fpsCap:s,fpsDet:l,delay:d});case Z.SAVE_SERVER_INFO:var u=t.payload,b=u.version,j=u.serverIn,p=u.serverOut;return Object(h.a)(Object(h.a)({},e),{},{isConnect:!0,version:b,serverIn:j,serverOut:p});case Z.SHUTDOWN_SERVER:return ye;default:return e||ye}},socket:function(e,t){switch(t.type){case Z.CONNECT_SERVER:var n=t.payload,i=n.address,c=n.port;return new WebSocket("ws://".concat(i,":").concat(c));case ee.CLOSE_SOCKET:return null;default:return e||null}}}),ke=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||me.d,we=Object(me.e)(Ce,ke(Object(me.a)()));function Ae(){var e=Object(o.c)((function(e){return e.serverInfo})).isConnect,t=Object(o.c)((function(e){return e.socket})),n=Object(o.b)();return Object(c.useEffect)((function(){e&&t&&(t.onmessage=function(e){var t,i=JSON.parse(e.data);i.objects?(n(function(e){var t=e.width,n=e.height,i=e.fpsCap,c=e.fpsDet,a=e.delay;return{type:Z.SAVE_VIDEO_INFO,payload:{width:t,height:n,fpsCap:i,fpsDet:c,delay:a}}}({width:i.width,height:i.height,fpsCap:i.fpsCap,fpsDet:i.fpsDet,delay:i.delay})),n((t=i.objects,{type:ge.SAVE_OBJECTS,payload:t}))):(n(function(e){var t=e.version,n=e.serverIn,i=e.serverOut;return{type:Z.SAVE_SERVER_INFO,payload:{version:t,serverIn:n,serverOut:i}}}({serverIn:i.serverIn,serverOut:i.serverOut,version:i.version})),n(function(e){return{type:fe.SAVE_FEATURES,payload:e}}({detection:i.detection,singleTracking:i.singleTracking,faceRedaction:i.faceRedaction,stabilization:i.stabilization,graphicsDisplay:i.graphicsDisplay,cameraCalibration:i.cameraCalibration,aruco:i.aruco,classes:i.classes})))},t.onclose=function(){n(te())},t.onerror=function(){var e;n((e={variant:"error",message:"Unable to connect to the server!"},{type:xe.SEND_MESSAGE,payload:e})),n(te())})}),[e,t]),null}var Te=Object(d.a)((function(){return{container:{left:"50%",right:"auto",bottom:"24px",transform:"translateX(-50%)",display:"flex",zIndex:1400,position:"fixed",alignItems:"center",justifyContent:"center"},snackbar:{display:"flex",padding:"6px 16px",fontSize:"1.2rem",fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:400,lineHeight:1.43,borderRadius:"4px",letterSpacing:"0.01071em",backgroundColor:"transparent",boxShadow:"0px 3px 5px -1px rgb(0 0 0 / 20%), 0px 6px 10px 0px rgb(0 0 0 / 14%), 0px 1px 18px 0px rgb(0 0 0 / 12%)",opacity:0,transform:"scale(0.75, 0.5625)",transition:"opacity 195ms cubic-bezier (0.4, 0, 0.2, 1) 0ms, \n                  transform 130ms cubic-bezier (0.4, 0, 0.2, 1) 65ms","&.active":{opacity:1,transform:0,transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms, transform 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"}},error:{color:"#fff",fontWeight:500,backgroundColor:"rgb(244 67 54)"},warning:{color:"#fff",fontWeight:500,backgroundColor:"rgb(255 152 0)"},info:{color:"#fff",fontWeight:500,backgroundColor:"rgb(33 150 243)"},success:{color:"#fff",fontWeight:500,backgroundColor:"rgb(76 175 80)"}}}));function Ie(){var e=Te(),t=Object(o.c)((function(e){return e.notification})),n=t.variant,i=t.message,a=Object(o.b)();return Object(c.useEffect)((function(){i&&setTimeout((function(){a({type:xe.HIDE_MESSAGE})}),2e3)}),[a,i]),Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("div",{className:Object(b.a)(e.container),children:Object(f.jsx)("div",{className:Object(b.a)(e.snackbar,i&&"active","error"===n&&e.error,"info"===n&&e.info,"success"===n&&e.success),children:Object(f.jsx)(S,{variant:"message",children:i})})})})}var De=function(){return Object(f.jsxs)(o.a,{store:we,children:[Object(f.jsx)(pe,{}),Object(f.jsx)(Ie,{}),Object(f.jsx)(Ae,{})]})};r.a.render(Object(f.jsx)(c.StrictMode,{children:Object(f.jsx)(De,{})}),document.getElementById("root"))}},[[622,1,2]]]);
//# sourceMappingURL=main.12c974aa.chunk.js.map